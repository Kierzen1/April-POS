{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 70, "column": 0}, "map": {"version":3,"sources":["file:///D:/Projects/April-POS/src/lib/prisma.ts"],"sourcesContent":["import \"dotenv/config\"\r\nimport { PrismaClient } from '@prisma/client'\r\n\r\nconst prismaClientSingleton = () => {\r\n    return new PrismaClient({\r\n        // Using any cast to bypass version-specific type checks for constructor options\r\n        datasourceUrl: process.env.DATABASE_URL,\r\n    } as any)\r\n}\r\n\r\ntype PrismaClientSingleton = ReturnType<typeof prismaClientSingleton>\r\n\r\nconst globalForPrisma = globalThis as unknown as {\r\n    prisma: PrismaClientSingleton | undefined\r\n}\r\n\r\nconst prisma = globalForPrisma.prisma ?? prismaClientSingleton()\r\n\r\nexport default prisma\r\n\r\nif (process.env.NODE_ENV !== 'production') globalForPrisma.prisma = prisma\r\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEA,MAAM,wBAAwB;IAC1B,OAAO,IAAI,sMAAY,CAAC;QACpB,gFAAgF;QAChF,eAAe,QAAQ,GAAG,CAAC,YAAY;IAC3C;AACJ;AAIA,MAAM,kBAAkB;AAIxB,MAAM,SAAS,gBAAgB,MAAM,IAAI;uCAE1B;AAEf,wCAA2C,gBAAgB,MAAM,GAAG"}},
    {"offset": {"line": 92, "column": 0}, "map": {"version":3,"sources":["file:///D:/Projects/April-POS/src/lib/firebase-admin.ts"],"sourcesContent":["import admin from 'firebase-admin';\r\n\r\nconst privateKey = process.env.FIREBASE_PRIVATE_KEY;\r\nconst firebaseAdminConfig = {\r\n    projectId: process.env.FIREBASE_PROJECT_ID,\r\n    clientEmail: process.env.FIREBASE_CLIENT_EMAIL,\r\n    privateKey: privateKey ? privateKey.replace(/\\\\n/g, '\\n') : undefined,\r\n};\r\n\r\nif (!admin.apps.length) {\r\n    try {\r\n        admin.initializeApp({\r\n            credential: admin.credential.cert(firebaseAdminConfig as any),\r\n        });\r\n    } catch (error) {\r\n        console.error('Firebase admin initialization error:', error);\r\n    }\r\n}\r\n\r\nconst adminDb = admin.firestore();\r\nconst adminAuth = admin.auth();\r\n\r\nexport { adminDb, adminAuth };\r\n"],"names":[],"mappings":";;;;;;AAAA;;AAEA,MAAM,aAAa,QAAQ,GAAG,CAAC,oBAAoB;AACnD,MAAM,sBAAsB;IACxB,WAAW,QAAQ,GAAG,CAAC,mBAAmB;IAC1C,aAAa,QAAQ,GAAG,CAAC,qBAAqB;IAC9C,YAAY,aAAa,WAAW,OAAO,CAAC,QAAQ,QAAQ;AAChE;AAEA,IAAI,CAAC,8LAAK,CAAC,IAAI,CAAC,MAAM,EAAE;IACpB,IAAI;QACA,8LAAK,CAAC,aAAa,CAAC;YAChB,YAAY,8LAAK,CAAC,UAAU,CAAC,IAAI,CAAC;QACtC;IACJ,EAAE,OAAO,OAAO;QACZ,QAAQ,KAAK,CAAC,wCAAwC;IAC1D;AACJ;AAEA,MAAM,UAAU,8LAAK,CAAC,SAAS;AAC/B,MAAM,YAAY,8LAAK,CAAC,IAAI"}},
    {"offset": {"line": 122, "column": 0}, "map": {"version":3,"sources":["file:///D:/Projects/April-POS/src/lib/migrate-to-firestore.ts"],"sourcesContent":["import prisma from \"./prisma\";\r\nimport { adminDb } from \"./firebase-admin\";\r\n\r\nexport async function migrateProductsToFirestore() {\r\n    console.log(\"Starting Product Migration...\");\r\n\r\n    try {\r\n        // 1. Fetch all products from Prisma\r\n        const products = await prisma.product.findMany();\r\n        console.log(`Found ${products.length} products to migrate.`);\r\n\r\n        const batch = adminDb.batch();\r\n        const productsCollection = adminDb.collection(\"products\");\r\n\r\n        for (const product of products) {\r\n            const docRef = productsCollection.doc(product.id);\r\n\r\n            // Convert Prisma product to Firestore format\r\n            const firestoreData = {\r\n                barcode: product.barcode,\r\n                name: product.name,\r\n                description: product.description || \"\",\r\n                price: Number(product.price), // Prisma Decimal to number\r\n                stock: product.stock,\r\n                lowStockThreshold: product.lowStockThreshold,\r\n                category: product.category || \"General\",\r\n                image: product.image || \"\",\r\n                createdAt: product.createdAt,\r\n                updatedAt: product.updatedAt,\r\n                migratedAt: new Date(),\r\n            };\r\n\r\n            batch.set(docRef, firestoreData);\r\n            console.log(`- Prepared: ${product.name} (${product.barcode})`);\r\n        }\r\n\r\n        // 2. Commit the batch\r\n        await batch.commit();\r\n        console.log(\"Success: All products have been migrated to Firestore!\");\r\n\r\n        return { success: true, count: products.length };\r\n    } catch (error) {\r\n        console.error(\"Migration FAILED:\", error);\r\n        return { success: false, error: (error as Error).message };\r\n    }\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,eAAe;IAClB,QAAQ,GAAG,CAAC;IAEZ,IAAI;QACA,oCAAoC;QACpC,MAAM,WAAW,MAAM,iIAAM,CAAC,OAAO,CAAC,QAAQ;QAC9C,QAAQ,GAAG,CAAC,CAAC,MAAM,EAAE,SAAS,MAAM,CAAC,qBAAqB,CAAC;QAE3D,MAAM,QAAQ,4IAAO,CAAC,KAAK;QAC3B,MAAM,qBAAqB,4IAAO,CAAC,UAAU,CAAC;QAE9C,KAAK,MAAM,WAAW,SAAU;YAC5B,MAAM,SAAS,mBAAmB,GAAG,CAAC,QAAQ,EAAE;YAEhD,6CAA6C;YAC7C,MAAM,gBAAgB;gBAClB,SAAS,QAAQ,OAAO;gBACxB,MAAM,QAAQ,IAAI;gBAClB,aAAa,QAAQ,WAAW,IAAI;gBACpC,OAAO,OAAO,QAAQ,KAAK;gBAC3B,OAAO,QAAQ,KAAK;gBACpB,mBAAmB,QAAQ,iBAAiB;gBAC5C,UAAU,QAAQ,QAAQ,IAAI;gBAC9B,OAAO,QAAQ,KAAK,IAAI;gBACxB,WAAW,QAAQ,SAAS;gBAC5B,WAAW,QAAQ,SAAS;gBAC5B,YAAY,IAAI;YACpB;YAEA,MAAM,GAAG,CAAC,QAAQ;YAClB,QAAQ,GAAG,CAAC,CAAC,YAAY,EAAE,QAAQ,IAAI,CAAC,EAAE,EAAE,QAAQ,OAAO,CAAC,CAAC,CAAC;QAClE;QAEA,sBAAsB;QACtB,MAAM,MAAM,MAAM;QAClB,QAAQ,GAAG,CAAC;QAEZ,OAAO;YAAE,SAAS;YAAM,OAAO,SAAS,MAAM;QAAC;IACnD,EAAE,OAAO,OAAO;QACZ,QAAQ,KAAK,CAAC,qBAAqB;QACnC,OAAO;YAAE,SAAS;YAAO,OAAO,AAAC,MAAgB,OAAO;QAAC;IAC7D;AACJ"}},
    {"offset": {"line": 176, "column": 0}, "map": {"version":3,"sources":["file:///D:/Projects/April-POS/src/app/api/migrate/route.ts"],"sourcesContent":["import { NextResponse } from \"next/server\";\r\nimport { migrateProductsToFirestore } from \"@/lib/migrate-to-firestore\";\r\n\r\nexport async function GET() {\r\n    try {\r\n        const result = await migrateProductsToFirestore();\r\n        return NextResponse.json(result);\r\n    } catch (error) {\r\n        return NextResponse.json({\r\n            success: false,\r\n            error: (error as Error).message\r\n        }, { status: 500 });\r\n    }\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,eAAe;IAClB,IAAI;QACA,MAAM,SAAS,MAAM,IAAA,wKAA0B;QAC/C,OAAO,gJAAY,CAAC,IAAI,CAAC;IAC7B,EAAE,OAAO,OAAO;QACZ,OAAO,gJAAY,CAAC,IAAI,CAAC;YACrB,SAAS;YACT,OAAO,AAAC,MAAgB,OAAO;QACnC,GAAG;YAAE,QAAQ;QAAI;IACrB;AACJ"}}]
}